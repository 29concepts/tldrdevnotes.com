<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no minimum-scale=1'>
  <title>TLDR Dev Notes</title>
  <link rel='stylesheet' href='/css/main.css'> 
  <link rel="stylesheet" href="/prism/prism.css">
</head>
<body>

  
<header id="header">
  <div id="logo">
    <h1>TLDR Dev Notes</h1>
  </div>

  <nav id="main-nav">
    
      
        <a href="/">Home</a>
      
        <a href="/about/">About</a>
      
        <a href="/contact/">Contact</a>
      
        <a href="/quotes/">Quotes</a>
      
        <a href="/resources/">Resources</a>
      
        <a href="/progress/">What i did</a>
      
    
  </nav>

</header>


  
  <div id="sidebar">
  <h6>Sections</h6>
  
  <ul id="list-sections">
    
      <li><a href="/api/">
        
        APIs
        </a></li>
    
      <li><a href="/aws/">
        
        Amazon Web Services (AWS)
        </a></li>
    
      <li><a href="/bash-scripting/">
        
        Bash Scripting
        </a></li>
    
      <li><a href="/css-sass/">
        
        CSS &amp; Sass
        </a></li>
    
      <li><a href="/cheatsheets/">
        
        Cheatsheets
        </a></li>
    
      <li><a href="/commands/">
        
        Commands
        </a></li>
    
      <li><a href="/databases/">
        
        Databases
        </a></li>
    
      <li><a href="/drafts/">
        
        Drafts
        </a></li>
    
      <li><a href="/git-github/">
        
        Git &amp; Github
        </a></li>
    
      <li><a href="/javascript/">
        
        JavaScript
        </a></li>
    
      <li><a href="/jekyll/">
        
        Jekyll
        </a></li>
    
      <li><a href="/linux/">
        
        Linux
        </a></li>
    
      <li><a href="/misc/">
        
        Misc
        </a></li>
    
      <li><a href="/node-api/">
        
        Node-api
        </a></li>
    
      <li><a href="/nodejs/">
        
        Node.js
        </a></li>
    
      <li><a href="/opencart/">
        
        OpenCart
        </a></li>
    
      <li><a href="/php/">
        
        PHP
        </a></li>
    
      <li><a href="/programming/">
        
        Programming
        </a></li>
    
      <li><a href="/python/">
        
        Python
        </a></li>
    
      <li><a href="/quotes/">
        
        Quotes
        </a></li>
    
      <li><a href="/raspberrypi/">
        
        Raspberry Pi
        </a></li>
    
      <li><a href="/reactjs/">
        
        Reactjs
        </a></li>
    
      <li><a href="/redux/">
        
        Redux
        </a></li>
    
      <li><a href="/resources/">
        
        Resources
        </a></li>
    
      <li><a href="/sysadmin/">
        
        System Administration
        </a></li>
    
      <li><a href="/webdev/">
        
        Web Development
        </a></li>
    
      <li><a href="/workflow/">
        
        Workflow
        </a></li>
    
      <li><a href="/ios-swift/">
        
        iOS &amp; Swift
        </a></li>
    
        </ul>

  
  <section>
    <h6>Tags</h6>
    
      <a href="/tags/amazon-rds">amazon-rds</a>, 
    
      <a href="/tags/amazon-s3">amazon-s3</a>, 
    
      <a href="/tags/api">api</a>, 
    
      <a href="/tags/array-methods">array-methods</a>, 
    
      <a href="/tags/aws">aws</a>, 
    
      <a href="/tags/babel">babel</a>, 
    
      <a href="/tags/backups">backups</a>, 
    
      <a href="/tags/bash">bash</a>, 
    
      <a href="/tags/basics">basics</a>, 
    
      <a href="/tags/bluetooth">bluetooth</a>, 
    
      <a href="/tags/cheatsheet">cheatsheet</a>, 
    
      <a href="/tags/cli">cli</a>, 
    
      <a href="/tags/commands">commands</a>, 
    
      <a href="/tags/compass">compass</a>, 
    
      <a href="/tags/concepts">concepts</a>, 
    
      <a href="/tags/coreblueooth">coreblueooth</a>, 
    
      <a href="/tags/crontab">crontab</a>, 
    
      <a href="/tags/css">css</a>, 
    
      <a href="/tags/database">database</a>, 
    
      <a href="/tags/databases">databases</a>, 
    
      <a href="/tags/date">date</a>, 
    
      <a href="/tags/debian">debian</a>, 
    
      <a href="/tags/editor">editor</a>, 
    
      <a href="/tags/education">education</a>, 
    
      <a href="/tags/es2015">es2015</a>, 
    
      <a href="/tags/firebase">firebase</a>, 
    
      <a href="/tags/format">format</a>, 
    
      <a href="/tags/free">free</a>, 
    
      <a href="/tags/fundamentals">fundamentals</a>, 
    
      <a href="/tags/getting-started">getting-started</a>, 
    
      <a href="/tags/git">git</a>, 
    
      <a href="/tags/github-pages">github-pages</a>, 
    
      <a href="/tags/guides">guides</a>, 
    
      <a href="/tags/hacking">hacking</a>, 
    
      <a href="/tags/hosting">hosting</a>, 
    
      <a href="/tags/how-to">how-to</a>, 
    
      <a href="/tags/hugo">hugo</a>, 
    
      <a href="/tags/ios">ios</a>, 
    
      <a href="/tags/javascript">javascript</a>, 
    
      <a href="/tags/jekyll">jekyll</a>, 
    
      <a href="/tags/js">js</a>, 
    
      <a href="/tags/keychain">keychain</a>, 
    
      <a href="/tags/lamp">lamp</a>, 
    
      <a href="/tags/lfs">lfs</a>, 
    
      <a href="/tags/linux">linux</a>, 
    
      <a href="/tags/macos">macos</a>, 
    
      <a href="/tags/markdown">markdown</a>, 
    
      <a href="/tags/media-queries">media-queries</a>, 
    
      <a href="/tags/mongodb">mongodb</a>, 
    
      <a href="/tags/mysql">mysql</a>, 
    
      <a href="/tags/nagios">nagios</a>, 
    
      <a href="/tags/node">node</a>, 
    
      <a href="/tags/nodejs">nodejs</a>, 
    
      <a href="/tags/npm">npm</a>, 
    
      <a href="/tags/opencart">opencart</a>, 
    
      <a href="/tags/phpmyadmin">phpmyadmin</a>, 
    
      <a href="/tags/programming">programming</a>, 
    
      <a href="/tags/python">python</a>, 
    
      <a href="/tags/raspberry-pi">raspberry-pi</a>, 
    
      <a href="/tags/react">react</a>, 
    
      <a href="/tags/react-router">react-router</a>, 
    
      <a href="/tags/reactjs">reactjs</a>, 
    
      <a href="/tags/redux">redux</a>, 
    
      <a href="/tags/s3">s3</a>, 
    
      <a href="/tags/sass">sass</a>, 
    
      <a href="/tags/script">script</a>, 
    
      <a href="/tags/scripts">scripts</a>, 
    
      <a href="/tags/snippets">snippets</a>, 
    
      <a href="/tags/sql">sql</a>, 
    
      <a href="/tags/ssh">ssh</a>, 
    
      <a href="/tags/steganography">steganography</a>, 
    
      <a href="/tags/sublime-text">sublime-text</a>, 
    
      <a href="/tags/sync">sync</a>, 
    
      <a href="/tags/sysadmin">sysadmin</a>, 
    
      <a href="/tags/system-management">system-management</a>, 
    
      <a href="/tags/table">table</a>, 
    
      <a href="/tags/terminal">terminal</a>, 
    
      <a href="/tags/ubuntu">ubuntu</a>, 
    
      <a href="/tags/wifi">wifi</a>, 
    
      <a href="/tags/wordpress">wordpress</a>, 
    
      <a href="/tags/workflow">workflow</a>, 
    
  </section>

  <section>
    <h6>Most Used Tags</h6>
    
      <a href="/tags/linux">linux</a>,
    
      <a href="/tags/es2015">es2015</a>,
    
      <a href="/tags/how-to">how-to</a>,
    
      <a href="/tags/array-methods">array-methods</a>,
    
      <a href="/tags/bash">bash</a>,
    
      <a href="/tags/commands">commands</a>,
    
      <a href="/tags/cheatsheet">cheatsheet</a>,
    
      <a href="/tags/concepts">concepts</a>,
    
      <a href="/tags/mysql">mysql</a>,
    
      <a href="/tags/free">free</a>,
    
      <a href="/tags/sass">sass</a>,
    
      <a href="/tags/compass">compass</a>,
    
      <a href="/tags/python">python</a>,
    
      <a href="/tags/backups">backups</a>,
    
      <a href="/tags/editor">editor</a>,
    
      <a href="/tags/hugo">hugo</a>,
    
      <a href="/tags/opencart">opencart</a>,
    
      <a href="/tags/raspberry-pi">raspberry-pi</a>,
    
      <a href="/tags/basics">basics</a>,
    
      <a href="/tags/database">database</a>,
    
  </section>


</div>


  
  <div id="main">


<h1 class="post_title">Linux - Basic User Management</h1>


<div class="post_meta">
  
    
    
  
    
    
    
      <div class="meta_date"><strong>Last updated on:</strong> Aug 20, 2015</div>
    
  
    
    
    <div class="meta_section"><strong>Section:</strong> 
      
        <a href="/linux">Linux</a>
          
    </div>


    
     
      <div class="meta_tags">
        <strong>Tags:</strong>
        
         
        
          
            <a href="/tags/cli">#cli</a>
          
        
      </div>
    
  
  </div>



<div class="content">
    

<h3 id="cheatsheet">Cheatsheet</h3>

<table>
<thead>
<tr>
<th>command</th>
<th>meaning</th>
</tr>
</thead>

<tbody>
<tr>
<td>whoami</td>
<td>show which user is logged in</td>
</tr>

<tr>
<td>passwd</td>
<td>change password of current user</td>
</tr>

<tr>
<td>passwd jane</td>
<td>change Jane&rsquo;s password</td>
</tr>

<tr>
<td>su</td>
<td>become <strong>s</strong>uper<strong>u</strong>ser / change user to root</td>
</tr>

<tr>
<td>su jane</td>
<td>change user to jane</td>
</tr>

<tr>
<td>sudo</td>
<td>superuser do = do it as a superuser</td>
</tr>

<tr>
<td>adduser james</td>
<td>add a user named &lsquo;james&rsquo;</td>
</tr>

<tr>
<td>deluser james</td>
<td>delete the user &lsquo;james&rsquo;</td>
</tr>

<tr>
<td>passwd -l jane</td>
<td>lock jane&rsquo;s password</td>
</tr>

<tr>
<td>passwd &ndash;lock jane</td>
<td>lock jane&rsquo;s password</td>
</tr>
</tbody>
</table>

<h4 id="whoami"><code>whoami</code></h4>

<p>shows which user is logged in</p>

<h4 id="passwd"><code>passwd</code></h4>

<p>change the password for the current user. <code>passwd jane</code> = Change Jane&rsquo;s password</p>

<h4 id="su"><code>su</code></h4>

<p><strong>S</strong>uper <strong>U</strong>ser. login to a different user, for example <code>su jalal</code> = login to jalal&rsquo;s account. only <code>su</code> without a username provided will change to root user by default.</p>

<h4 id="su-root"><code>su root</code></h4>

<p>login to a different user, in this case root. <code>su</code> and <code>su root</code> will both do the same thing.</p>

<h4 id="adduser"><code>adduser</code></h4>

<p>add a user. for example, <code>adduser jane</code> will add a user called jane. You need root/sudo access/permissions to cerate or delete a user.</p>

<h4 id="userdel"><code>userdel</code></h4>

<p>delete a user. for example: <code>userdel jalal</code> will delete the user named jalal. Use the <code>-r</code> flag to delete the user BUT keep the user&rsquo;s directory/files. For example: <code>userdel -r jalal</code> will delete a user named jalal but keep his home directory and other files.</p>

<h4 id="locking-a-user-s-password-l-or-lock">Locking a user&rsquo;s password <code>-l</code> or <code>--lock</code></h4>

<pre><code>passwd -l jane
</code></pre>

<p>The <strong>passwd</strong> command with the <code>-l</code> or <code>--lock</code> flag will lock the password of the named account (in our example, jane). Users with a locked password are not allowed to change their password.</p>

<p>Note that this does not disable the account. You need to be root (or have sudo priveleges) to be able to lock a user&rsquo;s password.</p>

<h2 id="adding-trusted-sudo-users">Adding trusted sudo users</h2>

<p>Sudo allows regular users to run commands as a super user. That way you won&rsquo;t have to be running as root the whole time.</p>

<p>If you are on Ubuntu, sudo is already installed for you. If you are on Debian, you&rsquo;ll have to install sudo:</p>

<pre><code>apt-get install sudo
</code></pre>

<p>If the package is not found then you&rsquo;ll have to update the system.</p>

<pre><code>apt-get update
</code></pre>

<p>The above command will update our linux machine with all of the available source for apt-get.</p>

<p>Now that you have sudo installed, you&rsquo;ll need to create/edit the <code>sudoers</code> file. This file is located in the <code>/etc</code> directory.</p>

<pre><code>cd /etc
nano sudoers
</code></pre>

<hr />

<p><code>whoami</code> = check which user are you
<code>su</code> = switch to Super User
<code>passwd</code> = change password</p>

<h3 id="change-password">Change password</h3>

<pre><code>passwd
</code></pre>

<p>will prompt to change the password for the current user</p>

<pre><code>passwd john
</code></pre>

<p>will prompt to chnage the password for user &lsquo;john&rsquo;.</p>

<h3 id="add-user">Add User</h3>

<pre><code>useradd james
</code></pre>

<p>will add a user called &lsquo;james&rsquo;. Adding user requires sudo priveleges.</p>

<h3 id="remove-a-user">Remove a user</h3>

<p>You have a couple of options:</p>

<ul>
<li>change his password</li>
<li>lock the user</li>

<li><p>delete him from the system</p>

<p>userdel -r john</p></li>
</ul>

<h3 id="check-if-a-user-has-been-added">Check if a user has been added</h3>

<p>The <code>-r</code> flag removes the home directory of the particular user from the system. You can not delete a user that&rsquo;s logged in.</p>

<p>You can check if a user is part of the system by checking the password file.</p>

<pre><code>cat /etc/passwd
</code></pre>

<p>In some cases, the act of creating a user does not create the directory, only when that user logs in the first time will the home directory be created. You can check if your user was created by doing a:</p>

<pre><code>sudo cat /etc/passwd | grep USERNAME
</code></pre>

<h3 id="creating-user-directory">Creating user directory</h3>

<p>Ubuntu considers the useradd utility a low level utility and sets it so that the homedir is not added by default. You fan manually add the directory if the user is created.</p>

<pre><code>useradd -m USERNAME
</code></pre>

<p>In Ubuntu, <code>adduser</code> creates a directory for new users by default. If not, you can use the <code>-d</code> flag.</p>

<p>If you want to specify the path of the home directory, use:</p>

<pre><code>useradd -m d /PATH/TO/FOLDER USERNAME
</code></pre>

<hr />

<h2 id="links">Links</h2>

<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-add-delete-and-grant-sudo-privileges-to-users-on-a-debian-vps" target="_blank">How To Add, Delete, and Grant Sudo Privileges to Users on a Debian VPS</a></li>
<li><a href="http://askubuntu.com/questions/7477/how-can-i-add-a-new-user-as-sudoer-using-the-command-line" target="_blank">How can I add a new user as sudoer using the command line?</a></li>
</ul>

</div>








<footer id="footer">
<hr>
  <section>
    Please note that this site and the posts on it are, and will always be, a work in progress. If i waited for perfection, i’d never get anything done.
  </section>
  <span class="copyright"> Copyright &copy; 2014 - 2014 Aamnah. All rights reserved.</span>
</footer>

</div>

<script src='/prism/prism.js'></script>
</body>
</html>