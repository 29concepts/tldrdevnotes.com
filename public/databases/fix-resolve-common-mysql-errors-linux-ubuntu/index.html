<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no minimum-scale=1'>
  <title>TLDR Dev Notes</title>
  <link rel='stylesheet' href='/css/main.css'> 
  <link rel="stylesheet" href="/prism/prism.css">
</head>
<body>

  
<header id="header">
  <div id="logo">
    <h1>TLDR Dev Notes</h1>
  </div>

  <nav id="main-nav">
    
      
        <a href="/">Home</a>
      
        <a href="/about/">About</a>
      
        <a href="/contact/">Contact</a>
      
        <a href="/quotes/">Quotes</a>
      
        <a href="/resources/">Resources</a>
      
        <a href="/progress/">What i did</a>
      
    
  </nav>

</header>


  
  <div id="sidebar">
  <h6>Sections</h6>
  
  <ul id="list-sections">
    
      <li><a href="/api/">
        
        APIs
        </a></li>
    
      <li><a href="/aws/">
        
        Amazon Web Services (AWS)
        </a></li>
    
      <li><a href="/bash-scripting/">
        
        Bash Scripting
        </a></li>
    
      <li><a href="/css-sass/">
        
        CSS &amp; Sass
        </a></li>
    
      <li><a href="/cheatsheets/">
        
        Cheatsheets
        </a></li>
    
      <li><a href="/commands/">
        
        Commands
        </a></li>
    
      <li><a href="/databases/">
        
        Databases
        </a></li>
    
      <li><a href="/drafts/">
        
        Drafts
        </a></li>
    
      <li><a href="/git-github/">
        
        Git &amp; Github
        </a></li>
    
      <li><a href="/javascript/">
        
        JavaScript
        </a></li>
    
      <li><a href="/jekyll/">
        
        Jekyll
        </a></li>
    
      <li><a href="/linux/">
        
        Linux
        </a></li>
    
      <li><a href="/misc/">
        
        Misc
        </a></li>
    
      <li><a href="/node-api/">
        
        Node-api
        </a></li>
    
      <li><a href="/nodejs/">
        
        Node.js
        </a></li>
    
      <li><a href="/opencart/">
        
        OpenCart
        </a></li>
    
      <li><a href="/php/">
        
        PHP
        </a></li>
    
      <li><a href="/programming/">
        
        Programming
        </a></li>
    
      <li><a href="/python/">
        
        Python
        </a></li>
    
      <li><a href="/quotes/">
        
        Quotes
        </a></li>
    
      <li><a href="/raspberrypi/">
        
        Raspberry Pi
        </a></li>
    
      <li><a href="/reactjs/">
        
        Reactjs
        </a></li>
    
      <li><a href="/redux/">
        
        Redux
        </a></li>
    
      <li><a href="/resources/">
        
        Resources
        </a></li>
    
      <li><a href="/sysadmin/">
        
        System Administration
        </a></li>
    
      <li><a href="/webdev/">
        
        Web Development
        </a></li>
    
      <li><a href="/workflow/">
        
        Workflow
        </a></li>
    
      <li><a href="/ios-swift/">
        
        iOS &amp; Swift
        </a></li>
    
        </ul>

  
  <section>
    <h6>Tags</h6>
    
      <a href="/tags/amazon-rds">amazon-rds</a>, 
    
      <a href="/tags/amazon-s3">amazon-s3</a>, 
    
      <a href="/tags/api">api</a>, 
    
      <a href="/tags/array-methods">array-methods</a>, 
    
      <a href="/tags/aws">aws</a>, 
    
      <a href="/tags/babel">babel</a>, 
    
      <a href="/tags/backups">backups</a>, 
    
      <a href="/tags/bash">bash</a>, 
    
      <a href="/tags/basics">basics</a>, 
    
      <a href="/tags/bluetooth">bluetooth</a>, 
    
      <a href="/tags/cheatsheet">cheatsheet</a>, 
    
      <a href="/tags/cli">cli</a>, 
    
      <a href="/tags/commands">commands</a>, 
    
      <a href="/tags/compass">compass</a>, 
    
      <a href="/tags/concepts">concepts</a>, 
    
      <a href="/tags/coreblueooth">coreblueooth</a>, 
    
      <a href="/tags/crontab">crontab</a>, 
    
      <a href="/tags/css">css</a>, 
    
      <a href="/tags/database">database</a>, 
    
      <a href="/tags/databases">databases</a>, 
    
      <a href="/tags/date">date</a>, 
    
      <a href="/tags/debian">debian</a>, 
    
      <a href="/tags/editor">editor</a>, 
    
      <a href="/tags/education">education</a>, 
    
      <a href="/tags/es2015">es2015</a>, 
    
      <a href="/tags/firebase">firebase</a>, 
    
      <a href="/tags/format">format</a>, 
    
      <a href="/tags/free">free</a>, 
    
      <a href="/tags/fundamentals">fundamentals</a>, 
    
      <a href="/tags/getting-started">getting-started</a>, 
    
      <a href="/tags/git">git</a>, 
    
      <a href="/tags/github-pages">github-pages</a>, 
    
      <a href="/tags/guides">guides</a>, 
    
      <a href="/tags/hacking">hacking</a>, 
    
      <a href="/tags/hosting">hosting</a>, 
    
      <a href="/tags/how-to">how-to</a>, 
    
      <a href="/tags/hugo">hugo</a>, 
    
      <a href="/tags/ios">ios</a>, 
    
      <a href="/tags/javascript">javascript</a>, 
    
      <a href="/tags/jekyll">jekyll</a>, 
    
      <a href="/tags/js">js</a>, 
    
      <a href="/tags/keychain">keychain</a>, 
    
      <a href="/tags/lamp">lamp</a>, 
    
      <a href="/tags/lfs">lfs</a>, 
    
      <a href="/tags/linux">linux</a>, 
    
      <a href="/tags/macos">macos</a>, 
    
      <a href="/tags/markdown">markdown</a>, 
    
      <a href="/tags/media-queries">media-queries</a>, 
    
      <a href="/tags/mongodb">mongodb</a>, 
    
      <a href="/tags/mysql">mysql</a>, 
    
      <a href="/tags/nagios">nagios</a>, 
    
      <a href="/tags/node">node</a>, 
    
      <a href="/tags/nodejs">nodejs</a>, 
    
      <a href="/tags/npm">npm</a>, 
    
      <a href="/tags/opencart">opencart</a>, 
    
      <a href="/tags/phpmyadmin">phpmyadmin</a>, 
    
      <a href="/tags/programming">programming</a>, 
    
      <a href="/tags/python">python</a>, 
    
      <a href="/tags/raspberry-pi">raspberry-pi</a>, 
    
      <a href="/tags/react">react</a>, 
    
      <a href="/tags/react-router">react-router</a>, 
    
      <a href="/tags/reactjs">reactjs</a>, 
    
      <a href="/tags/redux">redux</a>, 
    
      <a href="/tags/s3">s3</a>, 
    
      <a href="/tags/sass">sass</a>, 
    
      <a href="/tags/script">script</a>, 
    
      <a href="/tags/scripts">scripts</a>, 
    
      <a href="/tags/snippets">snippets</a>, 
    
      <a href="/tags/sql">sql</a>, 
    
      <a href="/tags/ssh">ssh</a>, 
    
      <a href="/tags/steganography">steganography</a>, 
    
      <a href="/tags/sublime-text">sublime-text</a>, 
    
      <a href="/tags/sync">sync</a>, 
    
      <a href="/tags/sysadmin">sysadmin</a>, 
    
      <a href="/tags/system-management">system-management</a>, 
    
      <a href="/tags/table">table</a>, 
    
      <a href="/tags/terminal">terminal</a>, 
    
      <a href="/tags/ubuntu">ubuntu</a>, 
    
      <a href="/tags/wifi">wifi</a>, 
    
      <a href="/tags/wordpress">wordpress</a>, 
    
      <a href="/tags/workflow">workflow</a>, 
    
  </section>

  <section>
    <h6>Most Used Tags</h6>
    
      <a href="/tags/linux">linux</a>,
    
      <a href="/tags/es2015">es2015</a>,
    
      <a href="/tags/how-to">how-to</a>,
    
      <a href="/tags/array-methods">array-methods</a>,
    
      <a href="/tags/bash">bash</a>,
    
      <a href="/tags/commands">commands</a>,
    
      <a href="/tags/cheatsheet">cheatsheet</a>,
    
      <a href="/tags/concepts">concepts</a>,
    
      <a href="/tags/mysql">mysql</a>,
    
      <a href="/tags/free">free</a>,
    
      <a href="/tags/sass">sass</a>,
    
      <a href="/tags/compass">compass</a>,
    
      <a href="/tags/python">python</a>,
    
      <a href="/tags/backups">backups</a>,
    
      <a href="/tags/editor">editor</a>,
    
      <a href="/tags/hugo">hugo</a>,
    
      <a href="/tags/opencart">opencart</a>,
    
      <a href="/tags/raspberry-pi">raspberry-pi</a>,
    
      <a href="/tags/basics">basics</a>,
    
      <a href="/tags/database">database</a>,
    
  </section>


</div>


  
  <div id="main">


<h1 class="post_title">Common MySQL Errors</h1>


<div class="post_meta">
  
    
    
  
    
    
    
      <div class="meta_date"><strong>Last updated on:</strong> Jul 06, 2017</div>
    
  
    
    
    <div class="meta_section"><strong>Section:</strong> 
      
        <a href="/databases">Databases</a>
          
    </div>


    
    
  
  </div>



<div class="content">
    

<h3 id="error-can-t-connect-to-local-mysql-server-through-socket-var-run-mysqld-mysqld-sock-2">Error: Can&rsquo;t connect to local MySQL server through socket &lsquo;/var/run/mysqld/mysqld.sock&rsquo; (2)</h3>

<p>tl;dr</p>

<pre><code class="language-bash">mkdir -p /var/run/mysqld
touch /var/run/mysqld/mysqld.sock
chmod 777 /var/run/mysqld/mysqld.sock
chown mysql:mysql /var/run/mysqld
service mysql restart
</code></pre>

<p>See if a socket file exists. To find all socket files on your system run:</p>

<pre><code class="language-bash">sudo find / -type s
</code></pre>

<p>Mysql server is usually open at <code>/var/lib/mysql/mysql.sock</code></p>

<p>The MySQl configuration file is usually at <code>/etc/mysql/my.cnf</code> (Ubuntu 17.04)</p>

<p>stop MySQL</p>

<pre><code class="language-bash">sudo service mysqld stop
</code></pre>

<p>Look for a <code>.pid</code> file and delete it if found</p>

<pre><code class="language-bash">ls -alh /var/run/mysqld/
</code></pre>

<p>create a new <code>.sock</code> file and chmod it</p>

<pre><code class="language-bash">touch /var/run/mysqld/mysqld.sock
chmod 777 /var/run/mysqld/mysqld.sock
</code></pre>

<p>also set <code>mysql</code> as the owner of <code>/var/run/mysqld</code></p>

<pre><code class="language-bash">chown mysql:mysql /var/run/mysqld
</code></pre>

<p>start MySQL again</p>

<pre><code class="language-bash">sudo service mysql restart
</code></pre>

<h3 id="failed-error-the-mysql-server-is-running-with-the-skip-grant-tables-option-so-it-cannot-execute-this-statement">Failed! Error: The MySQL server is running with the &ndash;skip-grant-tables option so it cannot execute this statement</h3>

<p>Login to MySQL</p>

<pre><code class="language-bash">mysql
</code></pre>

<p>execute</p>

<pre><code class="language-sql">FLUSH PRIVILEGES;
exit
</code></pre>

<h3 id="mysqld-safe-directory-var-run-mysqld-for-unix-socket-file-don-t-exists">mysqld_safe Directory &lsquo;/var/run/mysqld&rsquo; for UNIX socket file don&rsquo;t exists.</h3>

<p>if you get while trying to start MySQL in safe mode</p>

<pre><code>mysqld_safe Directory '/var/run/mysqld' for UNIX socket file don't exists.
</code></pre>

<p>then make the directory</p>

<pre><code class="language-bash">mkdir -p /var/run/mysqld
chown mysql:mysql /var/run/mysqld
</code></pre>

<p>and re-run the command to start MySQL in safe mode.</p>

<h3 id="error-1146-42s02-table-mysql-user-doesn-t-exist">ERROR 1146 (42S02): Table &lsquo;mysql.USER&rsquo; doesn&rsquo;t exist</h3>

<p>Your database may be corrupt. See if <code>mysql.user</code> exits</p>

<pre><code class="language-sql">USE mysql;
SELECT * FROM user;
</code></pre>

<p>If these are missing you can try recreating the tables by running</p>

<pre><code class="language-bash">mysql_install_db
</code></pre>

<p>(I got this error because i had set a 100 character long generated password while installing MySQL, and it wasn&rsquo;t valid. The installation proceeded without giving an error. But checking the <code>mysql.user</code> table showed <code>*THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE</code>. Since mine was a fresh installation, i just removed and reinstalled MySQL <code>apt-get remove -y mysql-* &amp;&amp; apt-get purge -y mysql-*</code>)</p>

<h3 id="error-2003-hy000-can-t-connect-to-mysql-server-on-123-123-123-123-111">ERROR 2003 (HY000): Can&rsquo;t connect to MySQL server on &lsquo;123.123.123.123&rsquo; (111)</h3>

<p>See if the server you&rsquo;re trying to connect to allows connection. One common scenario is where your remote server is bound to localhost. You can find out with the following command (where 3306 is the default MySQL port) run this on the server you want to connect to</p>

<pre><code class="language-bash">netstat -nat | grep :3306
</code></pre>

<pre><code>tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN
</code></pre>

<p>If you see a localhost (127.0.0.1 or 192.168.x.x etc.) than the server is binding to localhost and not allowing any remote connections. To resolve this, uncomment the following line in <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code></p>

<pre><code class="language-bash">#bind-address = 127.0.0.1
</code></pre>

<p>Check <code>netstat</code> again, you should see <code>0.0.0.0</code> or just <code>:</code></p>

<pre><code># netstat -nat | grep :3306
tcp6       0      0 :::3306                 :::*                    LISTEN
</code></pre>

<h3 id="error-1819-hy000-your-password-does-not-satisfy-the-current-policy-requirements">ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</h3>

<p>The solution is to turn off password validation</p>

<pre><code class="language-bash">mysql -h localhost -u root -p
</code></pre>

<pre><code class="language-sql">uninstall plugin validate_password;
</code></pre>

<p>Or you could set the policy to LOW in the mysql conf file: <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code></p>

<pre><code class="language-bash"># 0: LOW
# 1: MEDIUM
# 2: STRONG
validate_password_policy=LOW
</code></pre>

<h2 id="links">Links</h2>

<ul>
<li><a href="https://stackoverflow.com/questions/11990708/error-cant-connect-to-local-mysql-server-through-socket-var-run-mysqld-mysq" target="_blank">https://stackoverflow.com/questions/11990708/error-cant-connect-to-local-mysql-server-through-socket-var-run-mysqld-mysq</a></li>
<li><a href="https://stackoverflow.com/questions/42153059/mysqld-safe-directory-var-run-mysqld-for-unix-socket-file-dont-exists" target="_blank">StackOverflow: mysqld_safe Directory &lsquo;/var/run/mysqld&rsquo; for UNIX socket file don&rsquo;t exists</a></li>
<li><a href="https://stackoverflow.com/questions/17780630/table-mysql-user-doesnt-existerror" target="_blank">StackOverflow: Table &lsquo;mysql.user&rsquo; doesn&rsquo;t exist:ERROR</a></li>
<li><a href="https://dev.mysql.com/doc/refman/5.6/en/validate-password-options-variables.html#sysvar_validate_password_policy" target="_blank">MySQL Docs: Password Validation Plugin Options and Variables</a></li>
</ul>

</div>








<footer id="footer">
<hr>
  <section>
    Please note that this site and the posts on it are, and will always be, a work in progress. If i waited for perfection, i’d never get anything done.
  </section>
  <span class="copyright"> Copyright &copy; 2014 - 2017 Aamnah. All rights reserved.</span>
</footer>

</div>

<script src='/prism/prism.js'></script>
</body>
</html>