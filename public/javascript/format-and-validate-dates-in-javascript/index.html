<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no minimum-scale=1'>
  <title>TLDR Dev Notes</title>
  <link rel='stylesheet' href='/css/main.css'> 
  <link rel="stylesheet" href="/prism/prism.css">
</head>
<body>

  
<header id="header">
  <div id="logo">
    <h1>TLDR Dev Notes</h1>
  </div>

  <nav id="main-nav">
    
      
        <a href="/">Home</a>
      
        <a href="/about/">About</a>
      
        <a href="/contact/">Contact</a>
      
        <a href="/quotes/">Quotes</a>
      
        <a href="/resources/">Resources</a>
      
        <a href="/progress/">What i did</a>
      
    
  </nav>

</header>


  
  <div id="sidebar">
  <h6>Sections</h6>
  
  <ul id="list-sections">
    
      <li><a href="/api/">
        
        APIs
        </a></li>
    
      <li><a href="/aws/">
        
        Amazon Web Services (AWS)
        </a></li>
    
      <li><a href="/bash-scripting/">
        
        Bash Scripting
        </a></li>
    
      <li><a href="/css-sass/">
        
        CSS &amp; Sass
        </a></li>
    
      <li><a href="/cheatsheets/">
        
        Cheatsheets
        </a></li>
    
      <li><a href="/commands/">
        
        Commands
        </a></li>
    
      <li><a href="/databases/">
        
        Databases
        </a></li>
    
      <li><a href="/drafts/">
        
        Drafts
        </a></li>
    
      <li><a href="/git-github/">
        
        Git &amp; Github
        </a></li>
    
      <li><a href="/javascript/">
        
        JavaScript
        </a></li>
    
      <li><a href="/jekyll/">
        
        Jekyll
        </a></li>
    
      <li><a href="/linux/">
        
        Linux
        </a></li>
    
      <li><a href="/misc/">
        
        Misc
        </a></li>
    
      <li><a href="/node-api/">
        
        Node-api
        </a></li>
    
      <li><a href="/nodejs/">
        
        Node.js
        </a></li>
    
      <li><a href="/opencart/">
        
        OpenCart
        </a></li>
    
      <li><a href="/php/">
        
        PHP
        </a></li>
    
      <li><a href="/programming/">
        
        Programming
        </a></li>
    
      <li><a href="/python/">
        
        Python
        </a></li>
    
      <li><a href="/quotes/">
        
        Quotes
        </a></li>
    
      <li><a href="/raspberrypi/">
        
        Raspberry Pi
        </a></li>
    
      <li><a href="/reactjs/">
        
        Reactjs
        </a></li>
    
      <li><a href="/redux/">
        
        Redux
        </a></li>
    
      <li><a href="/resources/">
        
        Resources
        </a></li>
    
      <li><a href="/sysadmin/">
        
        System Administration
        </a></li>
    
      <li><a href="/webdev/">
        
        Web Development
        </a></li>
    
      <li><a href="/workflow/">
        
        Workflow
        </a></li>
    
      <li><a href="/ios-swift/">
        
        iOS &amp; Swift
        </a></li>
    
        </ul>

  
  <section>
    <h6>Tags</h6>
    
      <a href="/tags/amazon-rds">amazon-rds</a>, 
    
      <a href="/tags/amazon-s3">amazon-s3</a>, 
    
      <a href="/tags/api">api</a>, 
    
      <a href="/tags/array-methods">array-methods</a>, 
    
      <a href="/tags/aws">aws</a>, 
    
      <a href="/tags/babel">babel</a>, 
    
      <a href="/tags/backups">backups</a>, 
    
      <a href="/tags/bash">bash</a>, 
    
      <a href="/tags/basics">basics</a>, 
    
      <a href="/tags/bluetooth">bluetooth</a>, 
    
      <a href="/tags/cheatsheet">cheatsheet</a>, 
    
      <a href="/tags/cli">cli</a>, 
    
      <a href="/tags/commands">commands</a>, 
    
      <a href="/tags/compass">compass</a>, 
    
      <a href="/tags/concepts">concepts</a>, 
    
      <a href="/tags/coreblueooth">coreblueooth</a>, 
    
      <a href="/tags/crontab">crontab</a>, 
    
      <a href="/tags/css">css</a>, 
    
      <a href="/tags/database">database</a>, 
    
      <a href="/tags/databases">databases</a>, 
    
      <a href="/tags/date">date</a>, 
    
      <a href="/tags/debian">debian</a>, 
    
      <a href="/tags/editor">editor</a>, 
    
      <a href="/tags/education">education</a>, 
    
      <a href="/tags/es2015">es2015</a>, 
    
      <a href="/tags/firebase">firebase</a>, 
    
      <a href="/tags/format">format</a>, 
    
      <a href="/tags/free">free</a>, 
    
      <a href="/tags/fundamentals">fundamentals</a>, 
    
      <a href="/tags/getting-started">getting-started</a>, 
    
      <a href="/tags/git">git</a>, 
    
      <a href="/tags/github-pages">github-pages</a>, 
    
      <a href="/tags/guides">guides</a>, 
    
      <a href="/tags/hacking">hacking</a>, 
    
      <a href="/tags/hosting">hosting</a>, 
    
      <a href="/tags/how-to">how-to</a>, 
    
      <a href="/tags/hugo">hugo</a>, 
    
      <a href="/tags/ios">ios</a>, 
    
      <a href="/tags/javascript">javascript</a>, 
    
      <a href="/tags/jekyll">jekyll</a>, 
    
      <a href="/tags/js">js</a>, 
    
      <a href="/tags/keychain">keychain</a>, 
    
      <a href="/tags/lamp">lamp</a>, 
    
      <a href="/tags/lfs">lfs</a>, 
    
      <a href="/tags/linux">linux</a>, 
    
      <a href="/tags/macos">macos</a>, 
    
      <a href="/tags/markdown">markdown</a>, 
    
      <a href="/tags/media-queries">media-queries</a>, 
    
      <a href="/tags/mongodb">mongodb</a>, 
    
      <a href="/tags/mysql">mysql</a>, 
    
      <a href="/tags/nagios">nagios</a>, 
    
      <a href="/tags/node">node</a>, 
    
      <a href="/tags/nodejs">nodejs</a>, 
    
      <a href="/tags/npm">npm</a>, 
    
      <a href="/tags/opencart">opencart</a>, 
    
      <a href="/tags/phpmyadmin">phpmyadmin</a>, 
    
      <a href="/tags/programming">programming</a>, 
    
      <a href="/tags/python">python</a>, 
    
      <a href="/tags/raspberry-pi">raspberry-pi</a>, 
    
      <a href="/tags/react">react</a>, 
    
      <a href="/tags/react-router">react-router</a>, 
    
      <a href="/tags/reactjs">reactjs</a>, 
    
      <a href="/tags/redux">redux</a>, 
    
      <a href="/tags/s3">s3</a>, 
    
      <a href="/tags/sass">sass</a>, 
    
      <a href="/tags/script">script</a>, 
    
      <a href="/tags/scripts">scripts</a>, 
    
      <a href="/tags/snippets">snippets</a>, 
    
      <a href="/tags/sql">sql</a>, 
    
      <a href="/tags/ssh">ssh</a>, 
    
      <a href="/tags/steganography">steganography</a>, 
    
      <a href="/tags/sublime-text">sublime-text</a>, 
    
      <a href="/tags/sync">sync</a>, 
    
      <a href="/tags/sysadmin">sysadmin</a>, 
    
      <a href="/tags/system-management">system-management</a>, 
    
      <a href="/tags/table">table</a>, 
    
      <a href="/tags/terminal">terminal</a>, 
    
      <a href="/tags/ubuntu">ubuntu</a>, 
    
      <a href="/tags/wifi">wifi</a>, 
    
      <a href="/tags/wordpress">wordpress</a>, 
    
      <a href="/tags/workflow">workflow</a>, 
    
  </section>

  <section>
    <h6>Most Used Tags</h6>
    
      <a href="/tags/linux">linux</a>,
    
      <a href="/tags/es2015">es2015</a>,
    
      <a href="/tags/how-to">how-to</a>,
    
      <a href="/tags/array-methods">array-methods</a>,
    
      <a href="/tags/bash">bash</a>,
    
      <a href="/tags/commands">commands</a>,
    
      <a href="/tags/cheatsheet">cheatsheet</a>,
    
      <a href="/tags/concepts">concepts</a>,
    
      <a href="/tags/mysql">mysql</a>,
    
      <a href="/tags/free">free</a>,
    
      <a href="/tags/sass">sass</a>,
    
      <a href="/tags/compass">compass</a>,
    
      <a href="/tags/python">python</a>,
    
      <a href="/tags/backups">backups</a>,
    
      <a href="/tags/editor">editor</a>,
    
      <a href="/tags/hugo">hugo</a>,
    
      <a href="/tags/opencart">opencart</a>,
    
      <a href="/tags/raspberry-pi">raspberry-pi</a>,
    
      <a href="/tags/basics">basics</a>,
    
      <a href="/tags/database">database</a>,
    
  </section>


</div>


  
  <div id="main">


<h1 class="post_title">Formatting and validating dates in JavaScript</h1>


<div class="post_meta">
  
    
    
  
    
    
    
      <div class="meta_date"><strong>Last updated on:</strong> Mar 28, 2017</div>
    
  
    
    
    <div class="meta_section"><strong>Section:</strong> 
      
        <a href="/javascript">JavaScript</a>
          
    </div>


    
     
      <div class="meta_tags">
        <strong>Tags:</strong>
        
         
        
          
            <a href="/tags/date">#date</a>
          
            <a href="/tags/format">#format</a>
          
        
      </div>
    
  
  </div>



<div class="content">
    

<h3 id="date-formats">Date Formats</h3>

<p>Dates come in multiple formats:</p>

<ul>
<li>a Unix timestamp (1481884441)</li>
<li>an ISO 8601 string (2016-11-04T17:39:59.910Z)</li>
<li>a locale string (Thursday, December 20, 2012, GMT)</li>
</ul>

<p>Let&rsquo;s get started by defining some variables to use in our examples</p>

<pre><code class="language-javascript">const UNIX = 1481884441
const ISO8601 = '2016-11-04T17:39:59.910Z'
const invalidISO = '2016-31-31T17:39:59.910Z'
const invalidDate = '2016/31/31'

let date = Date.now() // Date.now() is faster than new Date()
</code></pre>

<h5 id="date-now-vs-new-date"><code>Date.now()</code> vs. <code>new Date()</code></h5>

<p>Note that while <code>Date.now()</code> is faster in performance than <code>new Date()</code>, it gives a <em>number</em> value (epoch/unix time) instead of a Date <em>object</em>. So, you won&rsquo;t be able to do something like <code>Date.now().toLocaleTimeString()</code> because <code>.toLocaleDateString()</code> only works on a Date object.</p>

<pre><code class="language-javascript">typeof new Date() // &quot;object&quot;
typeof Date.now() // &quot;number&quot;

new Date().toLocaleDateString() // &quot;28/03/2017&quot;
Date.now().toLocaleDateString() // Uncaught TypeError: Date.now(...).toLocaleDateString is not a function
</code></pre>

<h2 id="check-if-value-is-a-valid-date">Check if value is a valid date</h2>

<h3 id="moment-js">Moment.js</h3>

<p>You can use <code>moment.js</code> and it&rsquo;s <code>isValid()</code> to see if the value is a valid date</p>

<pre><code class="language-javascript">import moment from 'moment'

moment.unix(UNIX).isValid() // check unix timestamps
moment(ISO8601).isValid() // check date strings
</code></pre>

<p>Validating dates with vanilla JS is a bit tricky because of the multiple date fromats.</p>

<h3 id="validate-date-strings">Validate Date Strings</h3>

<p>You can use <code>Date.parse()</code> to check if the value is a valid date <em>string</em>. It gives the Unix timestamp if valid date string and <code>NaN</code> if the string is unrecognized or contains illegal date values (e.g. February 31?)</p>

<p>To check is the output is Nan, you can use the <code>isNaN</code> function (<code>Date.prase(x) === NaN</code> doesn&rsquo;t work for some reason)</p>

<pre><code class="language-javascript">function isDateString (x) {
  return isNaN(Date.parse(x)) ? false : true
}

isDateString(UNIX) ? console.info('hell yeah') : console.info('neh') // &quot;neh&quot;
isDateString(ISO8601) ? console.info('hell yeah') : console.info('neh') // &quot;hell yeah&quot;
</code></pre>

<p><code>Date.parse()</code> is no good for validating Unix timestamps.</p>

<h3 id="validate-unix-timestamps">Validate Unix Timestamps</h3>

<p>The trick is to convert the timestamp to date object first and validate that. Since JS works in milliseconds, you need to convert the timestamp (seconds) to milliseconds first (by multiplying it with 1000)</p>

<pre><code class="language-javascript">function isUnixTimestamp (x) {
  let timestamp = x * 1000
  let time = new Date(timestamp)

  return isNaN(Date.parse(time)) ? false : true
}

isUnixTimestamp(UNIX) ? console.info('timestamp') : console.info('neh') // &quot;timestamp&quot;
isUnixTimestamp(ISO8601) ? console.info('timestamp') : console.info('neh') // &quot;neh&quot;
isUnixTimestamp(invalidISO) ? console.info('timestamp') : console.info('neh') // &quot;neh&quot;
</code></pre>

<p>We can combine both of the above function to make a <code>isValidDate</code> function.</p>

<pre><code class="language-javascript">function isValidDate (x) {
  return isDateString(x) || isUnixTimestamp(x) ? true : false
}

sValidDate(UNIX) ? console.info('valid date') : console.info('nope') // &quot;valid date&quot;
isValidDate(ISO8601) ? console.info('valid date') : console.info('nope') // &quot;valid date&quot;
isValidDate(invalidISO) ? console.info('valid date') : console.info('nope') // &quot;nope&quot;
isValidDate(invalidDate) ? console.info('valid date') : console.info('nope') // &quot;nope&quot;
isValidDate('abc') ? console.info('valid date') : console.info('nope') // &quot;nope&quot;
</code></pre>

<p>Note that there are going to be some edge cases with this:</p>

<pre><code class="language-javascript">// 123 is a valid date
isValidDate('123') ? console.info('valid date') : console.info('nope') // &quot;valid date&quot; 123 is a valid timestamp!

// Checking for 31st of Feb (this will give different values based on locale date format)
isValidDate('2016/02/31') ? console.info('valid date') : console.info('nope') // &quot;valid date&quot;
isValidDate('2016/31/02') ? console.info('valid date') : console.info('nope') // &quot;nope&quot;
</code></pre>

<h2 id="formatting-dates-with-locale-strings">Formatting dates with Locale strings</h2>

<p><code>toLocaleString()</code> let&rsquo;s you format a date using the locale settings. Locales let you specify the language whose formatting conventipons should be used. Different locales have different conventions for writing dates, for example <code>en-US</code> uses 12-hour time with AM/PM while <code>en-GB</code> uses 24-hour format. <code>en-US</code> has month first and then date, while <code>en-gb</code> has date first and then month. You can customize the format for the locale string.</p>

<pre><code class="language-javascript">console.info('en-us', date.toLocaleString('en-us')) // &quot;1/10/2017, 3:29:15 PM&quot;
console.info('en-GB', date.toLocaleString('en-GB')) // &quot;10/01/2017, 15:29:15&quot;
console.info('ar-EG', date.toLocaleString('ar-EG')) // &quot;١٠‏/١‏/٢٠١٧ ٣:٣٢:٣٣ م&quot;
console.info('de-DE', date.toLocaleString('de-DE')) // &quot;10.1.2017, 15:32:33&quot;
</code></pre>

<p>You can further customize the locale string by passing it an options argument (object).</p>

<pre><code class="language-javascript">let localeStringOptions = {
  weekday: 'long',
  month: 'long',
  day: 'numeric',
  year: 'numeric'
}

console.info('en-us', date.toLocaleString('en-us', localeStringOptions)) // &quot;Tuesday, January 10, 2017&quot;
console.info('en-GB', date.toLocaleString('en-GB', localeStringOptions)) // &quot;Tuesday, 10 January 2017&quot;
console.info('ar-EG', date.toLocaleString('ar-EG', localeStringOptions)) // &quot;الثلاثاء، ١٠ يناير، ٢٠١٧&quot;
console.info('de-DE', date.toLocaleString('de-DE', localeStringOptions)) // &quot;Dienstag, 10. Januar 2017&quot;
</code></pre>

<p>Furthermore, you can detect the locale of the browser with <code>navigator.language</code> and <code>navigator.userLanguage</code>, like this:</p>

<pre><code class="language-javascript">let locale = navigator.language || navigator.userLanguage

console.info('month', date.toLocaleString(locale, {month: 'long'})) // &quot;January&quot;
</code></pre>

<p>For example, get the month name (e.g. Jan) using <code>toLocaleString</code></p>

<pre><code class="language-javascript">let time = new Date('2016-11-04T17:39:59.910Z')

let localeString = time.toLocaleString('en-US', {month: 'short'})

console.info(localeString) // Nov
</code></pre>

<h2 id="notes">Notes</h2>

<ul>
<li><code>Date.now()</code> is faster than <code>new Date()</code> since you don&rsquo;t have to instantiate a new <code>Date</code> object. <a href="http://stackoverflow.com/a/15401259/890814" target="_blank">stackoverflow</a> <a href="http://jsperf.com/date-now-vs-new-date-gettime/8" target="_blank">jsperf</a></li>
</ul>

<h2 id="links">Links</h2>

<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse" target="_blank">MDN: Date.parse()</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleString" target="_blank">MDN: toLocaleString()</a></li>
<li><a href="https://jsbin.com/lihuzu/edit?js,console" target="_blank">JS Bin: .toLocaleString() examples</a></li>
<li><a href="https://jsbin.com/fomapu/15/edit?js,console" target="_blank">JS Bin: isValidDate()</a></li>
</ul>

</div>






  <div class="related">
    <h6>Related</h6>
      <ul>
        
          <li><a href="/javascript/howto-get-current-year-in-javascript/">Get Current Year in JavaScript</a></li>
        
      </ul>
  </div>



<footer id="footer">
<hr>
  <section>
    Please note that this site and the posts on it are, and will always be, a work in progress. If i waited for perfection, i’d never get anything done.
  </section>
  <span class="copyright"> Copyright &copy; 2014 - 2017 Aamnah. All rights reserved.</span>
</footer>

</div>

<script src='/prism/prism.js'></script>
</body>
</html>