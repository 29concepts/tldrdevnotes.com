<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no minimum-scale=1'>
  <title>TLDR Dev Notes</title>
  <link rel='stylesheet' href='/css/main.css'> 
  <link rel="stylesheet" href="/prism/prism.css">
</head>
<body>

  
<header id="header">
  <div id="logo">
    <h1>TLDR Dev Notes</h1>
  </div>

  <nav id="main-nav">
    
      
        <a href="/">Home</a>
      
        <a href="/about/">About</a>
      
        <a href="/contact/">Contact</a>
      
        <a href="/quotes/">Quotes</a>
      
        <a href="/resources/">Resources</a>
      
        <a href="/progress/">What i did</a>
      
    
  </nav>

</header>


  
  <div id="sidebar">
  <h6>Sections</h6>
  
  <ul id="list-sections">
    
      <li><a href="/api/">
        
        APIs
        </a></li>
    
      <li><a href="/aws/">
        
        Amazon Web Services (AWS)
        </a></li>
    
      <li><a href="/bash-scripting/">
        
        Bash Scripting
        </a></li>
    
      <li><a href="/css-sass/">
        
        CSS &amp; Sass
        </a></li>
    
      <li><a href="/cheatsheets/">
        
        Cheatsheets
        </a></li>
    
      <li><a href="/commands/">
        
        Commands
        </a></li>
    
      <li><a href="/databases/">
        
        Databases
        </a></li>
    
      <li><a href="/drafts/">
        
        Drafts
        </a></li>
    
      <li><a href="/git-github/">
        
        Git &amp; Github
        </a></li>
    
      <li><a href="/javascript/">
        
        JavaScript
        </a></li>
    
      <li><a href="/jekyll/">
        
        Jekyll
        </a></li>
    
      <li><a href="/linux/">
        
        Linux
        </a></li>
    
      <li><a href="/misc/">
        
        Misc
        </a></li>
    
      <li><a href="/node-api/">
        
        Node-api
        </a></li>
    
      <li><a href="/nodejs/">
        
        Node.js
        </a></li>
    
      <li><a href="/opencart/">
        
        OpenCart
        </a></li>
    
      <li><a href="/php/">
        
        PHP
        </a></li>
    
      <li><a href="/programming/">
        
        Programming
        </a></li>
    
      <li><a href="/python/">
        
        Python
        </a></li>
    
      <li><a href="/quotes/">
        
        Quotes
        </a></li>
    
      <li><a href="/raspberrypi/">
        
        Raspberry Pi
        </a></li>
    
      <li><a href="/reactjs/">
        
        Reactjs
        </a></li>
    
      <li><a href="/redux/">
        
        Redux
        </a></li>
    
      <li><a href="/resources/">
        
        Resources
        </a></li>
    
      <li><a href="/sysadmin/">
        
        System Administration
        </a></li>
    
      <li><a href="/webdev/">
        
        Web Development
        </a></li>
    
      <li><a href="/workflow/">
        
        Workflow
        </a></li>
    
      <li><a href="/ios-swift/">
        
        iOS &amp; Swift
        </a></li>
    
        </ul>

  
  <section>
    <h6>Tags</h6>
    
      <a href="/tags/amazon-rds">amazon-rds</a>, 
    
      <a href="/tags/amazon-s3">amazon-s3</a>, 
    
      <a href="/tags/api">api</a>, 
    
      <a href="/tags/array-methods">array-methods</a>, 
    
      <a href="/tags/aws">aws</a>, 
    
      <a href="/tags/babel">babel</a>, 
    
      <a href="/tags/backups">backups</a>, 
    
      <a href="/tags/bash">bash</a>, 
    
      <a href="/tags/basics">basics</a>, 
    
      <a href="/tags/bluetooth">bluetooth</a>, 
    
      <a href="/tags/cheatsheet">cheatsheet</a>, 
    
      <a href="/tags/cli">cli</a>, 
    
      <a href="/tags/commands">commands</a>, 
    
      <a href="/tags/compass">compass</a>, 
    
      <a href="/tags/concepts">concepts</a>, 
    
      <a href="/tags/coreblueooth">coreblueooth</a>, 
    
      <a href="/tags/crontab">crontab</a>, 
    
      <a href="/tags/css">css</a>, 
    
      <a href="/tags/database">database</a>, 
    
      <a href="/tags/databases">databases</a>, 
    
      <a href="/tags/date">date</a>, 
    
      <a href="/tags/debian">debian</a>, 
    
      <a href="/tags/editor">editor</a>, 
    
      <a href="/tags/education">education</a>, 
    
      <a href="/tags/es2015">es2015</a>, 
    
      <a href="/tags/firebase">firebase</a>, 
    
      <a href="/tags/format">format</a>, 
    
      <a href="/tags/free">free</a>, 
    
      <a href="/tags/fundamentals">fundamentals</a>, 
    
      <a href="/tags/getting-started">getting-started</a>, 
    
      <a href="/tags/git">git</a>, 
    
      <a href="/tags/github-pages">github-pages</a>, 
    
      <a href="/tags/guides">guides</a>, 
    
      <a href="/tags/hacking">hacking</a>, 
    
      <a href="/tags/hosting">hosting</a>, 
    
      <a href="/tags/how-to">how-to</a>, 
    
      <a href="/tags/hugo">hugo</a>, 
    
      <a href="/tags/ios">ios</a>, 
    
      <a href="/tags/javascript">javascript</a>, 
    
      <a href="/tags/jekyll">jekyll</a>, 
    
      <a href="/tags/js">js</a>, 
    
      <a href="/tags/keychain">keychain</a>, 
    
      <a href="/tags/lamp">lamp</a>, 
    
      <a href="/tags/lfs">lfs</a>, 
    
      <a href="/tags/linux">linux</a>, 
    
      <a href="/tags/macos">macos</a>, 
    
      <a href="/tags/markdown">markdown</a>, 
    
      <a href="/tags/media-queries">media-queries</a>, 
    
      <a href="/tags/mongodb">mongodb</a>, 
    
      <a href="/tags/mysql">mysql</a>, 
    
      <a href="/tags/nagios">nagios</a>, 
    
      <a href="/tags/node">node</a>, 
    
      <a href="/tags/nodejs">nodejs</a>, 
    
      <a href="/tags/npm">npm</a>, 
    
      <a href="/tags/opencart">opencart</a>, 
    
      <a href="/tags/phpmyadmin">phpmyadmin</a>, 
    
      <a href="/tags/programming">programming</a>, 
    
      <a href="/tags/python">python</a>, 
    
      <a href="/tags/raspberry-pi">raspberry-pi</a>, 
    
      <a href="/tags/react">react</a>, 
    
      <a href="/tags/react-router">react-router</a>, 
    
      <a href="/tags/reactjs">reactjs</a>, 
    
      <a href="/tags/redux">redux</a>, 
    
      <a href="/tags/s3">s3</a>, 
    
      <a href="/tags/sass">sass</a>, 
    
      <a href="/tags/script">script</a>, 
    
      <a href="/tags/scripts">scripts</a>, 
    
      <a href="/tags/snippets">snippets</a>, 
    
      <a href="/tags/sql">sql</a>, 
    
      <a href="/tags/ssh">ssh</a>, 
    
      <a href="/tags/steganography">steganography</a>, 
    
      <a href="/tags/sublime-text">sublime-text</a>, 
    
      <a href="/tags/sync">sync</a>, 
    
      <a href="/tags/sysadmin">sysadmin</a>, 
    
      <a href="/tags/system-management">system-management</a>, 
    
      <a href="/tags/table">table</a>, 
    
      <a href="/tags/terminal">terminal</a>, 
    
      <a href="/tags/ubuntu">ubuntu</a>, 
    
      <a href="/tags/wifi">wifi</a>, 
    
      <a href="/tags/wordpress">wordpress</a>, 
    
      <a href="/tags/workflow">workflow</a>, 
    
  </section>

  <section>
    <h6>Most Used Tags</h6>
    
      <a href="/tags/linux">linux</a>,
    
      <a href="/tags/es2015">es2015</a>,
    
      <a href="/tags/how-to">how-to</a>,
    
      <a href="/tags/array-methods">array-methods</a>,
    
      <a href="/tags/bash">bash</a>,
    
      <a href="/tags/commands">commands</a>,
    
      <a href="/tags/cheatsheet">cheatsheet</a>,
    
      <a href="/tags/concepts">concepts</a>,
    
      <a href="/tags/mysql">mysql</a>,
    
      <a href="/tags/free">free</a>,
    
      <a href="/tags/sass">sass</a>,
    
      <a href="/tags/compass">compass</a>,
    
      <a href="/tags/python">python</a>,
    
      <a href="/tags/backups">backups</a>,
    
      <a href="/tags/editor">editor</a>,
    
      <a href="/tags/hugo">hugo</a>,
    
      <a href="/tags/opencart">opencart</a>,
    
      <a href="/tags/raspberry-pi">raspberry-pi</a>,
    
      <a href="/tags/basics">basics</a>,
    
      <a href="/tags/database">database</a>,
    
  </section>


</div>


  
  <div id="main">


<h1 class="post_title">Intro to debconf</h1>


<div class="post_meta">
  
    
    
  
    
    
    
      <div class="meta_date"><strong>Last updated on:</strong> Aug 12, 2017</div>
    
  
    
    
    <div class="meta_section"><strong>Section:</strong> 
      
        <a href="/sysadmin">System Administration</a>
          
    </div>


    
    
  
  </div>



<div class="content">
    

<hr />

<h2 id="tl-dr">tl;dr</h2>

<ul>
<li><code>debcnof</code> is a configuration management tool</li>
<li>all the questions you get during installing <code>.deb</code> packages are stored in <code>debconf</code></li>
<li>You can preload answers to those questions to get non-interactive/slient installations</li>
<li>needs <code>sudo</code></li>
</ul>

<pre><code class="language-bash">sudo apt install debconf-utils

# get configurable values for a package
sudo debconf-get-selections | grep mysql

# set values 
echo &quot;set mysql-server/root_password YOURPASSWORD&quot; | debconf-communicate
# sudo debconf-set-selections &lt;&lt;&lt; &quot;mysql-server mysql-server/root_password password YOURPASSWORD&quot;
# echo 'mysql-server mysql-server/root_password password YOURPASSWORD' | debconf-set-selections

# show the list of debconf values configured for a package
debconf-show phpmyadmin

</code></pre>

<hr />

<p><code>debconf</code> is a configuration management tool for Debain. It let&rsquo;s you pre-load configurations, meaning you set configuration options before instaling a package. The major benefit of this is during scripting, you can pre-configure the values via <code>debconf-set-selections</code> and avoid entering values in the prompt, getting a non-interactive install.</p>

<blockquote>
<p>Debconf keeps all answers to questions packages can ask during installation, both the ones you gave yourself and the implied or low-priority ones chosen by the packager.</p>

<p>When using .deb-packages you’re used to getting asked about licenses, values, locations, downloads etc. All these are stored in debconf. You can preload those answers before so they won’t get asked during installation (a silent, scriptable, install) or to “steer” the package into your desired config-direction.</p>
</blockquote>

<p>The only issue is figuring out what the <code>selections</code> mean. For example, if you have gone through the install process of PHPMyAdmin a few times, you might be able to figure out what the five different password selections correspond to.</p>

<pre><code class="language-bash"># install debconf-utils to get `debconf-get-selections`
sudo apt install debconf-utils
</code></pre>

<h1 id="find-out-what-values-can-be-configured">Find out what values can be configured</h1>

<pre><code class="language-bash">sudo debconf-get-selections | grep mysql
</code></pre>

<pre><code class="language-bash">phpmyadmin	phpmyadmin/mysql/app-pass	password
mysql-server-5.7	mysql-server/root_password_again	password
dbconfig-common	dbconfig-common/mysql/admin-pass	password
dbconfig-common	dbconfig-common/mysql/app-pass	password
phpmyadmin	phpmyadmin/mysql/admin-pass	password
mysql-server-5.7	mysql-server/root_password	password
mysql-server-5.7	mysql-server-5.7/really_downgrade	boolean	false
phpmyadmin	phpmyadmin/mysql/method	select	Unix socket
dbconfig-common	dbconfig-common/mysql/admin-user	string
dbconfig-common	dbconfig-common/mysql/method	select	Unix socket
phpmyadmin	phpmyadmin/database-type	select	mysql
mysql-server-5.7	mysql-server/password_mismatch	error
mysql-server-5.7	mysql-server/no_upgrade_when_using_ndb	error
phpmyadmin	phpmyadmin/mysql/admin-user	string	debian-sys-maint
mysql-server-5.7	mysql-server-5.7/nis_warning	note
mysql-server-5.7	mysql-server-5.7/postrm_remove_databases	boolean	false
mysql-server-5.7	mysql-server-5.7/start_on_boot	boolean	true
</code></pre>

<h1 id="set-confgiure-values">Set/Confgiure values</h1>

<pre><code class="language-bash">sudo debconf-set-selections &lt;&lt;&lt; &quot;mysql-server mysql-server/root_password password YOURPASSWORD&quot;
# OR
echo 'mysql-server mysql-server/root_password password YOURPASSWORD' | debconf-set-selections
# OR
echo &quot;set mysql-server/root_password YOURPASSWORD&quot; | debconf-communicate
</code></pre>

<h1 id="get-details-about-an-already-configured-package">Get details about an already configured package</h1>

<p>Show the list of debconf values that a package has stored</p>

<pre><code class="language-bash"># debconf-show packagename
debconf-show phpmyadmin
</code></pre>

<pre><code class="language-bash">  phpmyadmin/password-confirm: (password omitted)
  phpmyadmin/app-password-confirm: (password omitted)
  phpmyadmin/setup-password: (password omitted)
  phpmyadmin/mysql/app-pass: (password omitted)
  phpmyadmin/mysql/admin-pass: (password omitted)
  phpmyadmin/remote/host: localhost
  phpmyadmin/upgrade-backup: true
  phpmyadmin/dbconfig-upgrade: true
  phpmyadmin/dbconfig-reinstall: false
  phpmyadmin/db/dbname: phpmyadmin
  phpmyadmin/passwords-do-not-match:
* phpmyadmin/mysql/admin-user: debian-sys-maint
  phpmyadmin/internal/reconfiguring: false
  phpmyadmin/database-type: mysql
  phpmyadmin/setup-username: admin
  phpmyadmin/missing-db-package-error: abort
  phpmyadmin/remove-error: abort
  phpmyadmin/upgrade-error: abort
  phpmyadmin/install-error: abort
  phpmyadmin/dbconfig-remove: true
  phpmyadmin/remote/port:
  phpmyadmin/purge: false
* phpmyadmin/reconfigure-webserver: apache2
  phpmyadmin/db/app-user: phpmyadmin
  phpmyadmin/internal/skip-preseed: false
  phpmyadmin/mysql/method: Unix socket
* phpmyadmin/dbconfig-install: true
  phpmyadmin/remote/newhost:
</code></pre>

<p>to query the current value of an option in the debconf database</p>

<pre><code class="language-bash">echo &quot;get packagename/pgsql/app-pass&quot; | debconf-communicate
</code></pre>

<p>and to change that value</p>

<pre><code class="language-bash">echo &quot;set packagename/pgsql/app-pass password1&quot; | debconf-communicate
</code></pre>

<h3 id="getting-and-setting-values-with-a-file">Getting and setting values with a file</h3>

<pre><code class="language-bash">debconf-get-selections | grep application &gt; file
# and edit the file, then use

debconf-set-selections &lt; file
# to load the changed settings.
</code></pre>

<h3 id="backup-debconf-configurations">Backup debconf configurations</h3>

<pre><code class="language-bash">debconf-get-selections &gt; debconf-selections-backup-`date +%Y%m%d`
</code></pre>

<h2 id="links">Links</h2>

<ul>
<li><a href="https://feeding.cloud.geek.nz/posts/manipulating-debconf-settings-on/" target="_blank">Manipulating debconf settings on the command line</a></li>
<li><a href="http://blog.delgurth.com/2009/01/19/pre-loading-debconf-values-for-easy-installation/" target="_blank">Pre-loading debconf values for easy installation</a></li>
</ul>

</div>








<footer id="footer">
<hr>
  <section>
    Please note that this site and the posts on it are, and will always be, a work in progress. If i waited for perfection, i’d never get anything done.
  </section>
  <span class="copyright"> Copyright &copy; 2014 - 2017 Aamnah. All rights reserved.</span>
</footer>

</div>

<script src='/prism/prism.js'></script>
</body>
</html>