<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    
      API Basics - Grabbing Data with Python
    
  </title>
  
  <meta name="description" content="  This is the accompanying code file for the video Coding With Python :: Learn API Basics to Grab Data with Python.">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/prism/prism.css">
  <link rel="canonical" href="http://tldrdevnotes.com/api-basics-grab-data-python">
  <link rel="alternate" type="application/rss+xml" title="TLDR Dev Notes" href="http://tldrdevnotes.com/feed.xml">
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css'>
</head>

  <body>
    <header class="Site-header">
  <div class="wrapper">
    <div>
      <a class="Site-title" href="/">TLDR Dev Notes</a>
      <small>Aamnah's developer notes</small>
    </div>

    <nav class="Site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
          <a class='page-link' href='/'>Home</a>
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/progress/">What i did</a>
          
        
          
          <a class="page-link" href="/quotes/">Quotes</a>
          
        
          
          <a class="page-link" href="/resource-list">Resources</a>
          
        
          
        
      </div>
    </nav>

  </div>
</header>

    <div class="page-content">
      <div class="wrapper">
        <article class="Post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="Post-header">
    <h1 class="Post-title" itemprop="name headline">API Basics - Grabbing Data with Python</h1>
    <p class="Post-meta">
      
      
      <span class='ctime'>Created
        <time datetime="2014-08-29T00:00:00+05:00" itemprop="datePublished">
          Aug 29, 2014
        </time>
      </span>
      

      

      <!---->
      <span style='float:right'><a href="https://github.com/aamnah/tldrdevnotes.com/blob/master/_api/api-basics-grab-data-python.md" target='_blank'>Edit this page on Github</a>
    </p>
    
      <ul class='tags'>
      
        <li>python</li>
      
      </ul>
    
  </header>

  <div class="Post-content" itemprop="articleBody">
    <ul>
  <li>
    <p>This is the accompanying code file for the video <a href="https://www.youtube.com/watch?v=pxofwuWTs7c">Coding With Python :: Learn API Basics to Grab Data with Python</a>.</p>
  </li>
  <li>
    <p>Check <a href="https://developers.google.com/books/examples/linkIndivBooks">this Google Books Developer link</a> for some code samples.</p>
  </li>
  <li>
    <p>This whole article uses ISBNdb for URL searches. Open Library is also mentioned as an API source but not used in any of the code.</p>
  </li>
</ul>

<h3 id="apis">APIs:</h3>
<ul>
  <li><a href="http://isbndb.com/api/v2/docs/books">ISBNdb</a></li>
  <li><a href="https://openlibrary.org/dev/docs/api/books">Open Library</a></li>
  <li><a href="https://developers.google.com/books/docs/v1/using">Google Books API</a></li>
</ul>

<h2 id="getting-data-in-terminal">Getting data in Terminal</h2>
<p>ISBNdb:</p>

<pre><code class="language-bash">curl http://isbndb.com/api/v2/json/RK8FPFZU/book/0765350386
</code></pre>

<p>Open Library:</p>

<pre><code class="language-bash">curl 'http://openlibrary.org/api/books?bibkeys=ISBN:0201558025&amp;jscmd=data&amp;format=json'
</code></pre>

<h3 id="output">Output</h3>

<p>For</p>

<pre><code class="language-bash">curl http://isbndb.com/api/v2/json/RK8FPFZU/book/0765350386
</code></pre>

<pre><code class="language-json">{
   "data" : [
      {
         "isbn10" : "0765350386",
         "title_long" : "",
         "notes" : "",
         "awards_text" : "",
         "subject_ids" : [],
         "isbn13" : "9780765350381",
         "urls_text" : "",
         "book_id" : "mistborn",
         "physical_description_text" : "672 pages",
         "summary" : "Brandon Sanderson, fantasy�s newest master tale spinner, author of the acclaimed debut Elantris, dares to turn a genre on its head by asking a simple question: What if the hero of prophecy fails? What kind of world results when the Dark Lord is in charge? The answer will be found in the Mistborn Trilogy, a saga of surprises and magical martial-arts action that begins in Mistborn.For a thousand years the ash fell and no flowers bloomed. For a thousand years the Skaa slaved in misery and lived in fear. For a thousand years the Lord Ruler, the �Sliver of Infinity,� reigned with absolute power and ultimate terror, divinely invincible. Then, when hope was so long lost that not even its memory remained, a terribly scarred, heart-broken half-Skaa rediscovered it in the depths of the Lord Ruler�s most hellish prison. Kelsier �snapped� and found in himself the powers of a Mistborn. A brilliant thief and natural leader, he turned his talents to the ultimate caper, with the Lord Ruler himself as the mark. Kelsier recruited the underworld�s elite, the smartest and most trustworthy allomancers, each of whom shares one of his many powers, and all of whom relish a high-stakes challenge. Only then does he reveal his ultimate dream, not just the greatest heist in history, but the downfall of the divine despot.But even with the best criminal crew ever assembled, Kel�s plan looks more like the ultimate long shot, until luck brings a ragged girl named Vin into his life. Like him, she�s a half-Skaa orphan, but she�s lived a much harsher life. Vin has learned to expect betrayal from everyone she meets, and gotten it. She will have to learn to trust, if Kel is to help her master powers of which she never dreamed.Readers of Elantris thought they'd discovered someone special in Brandon Sanderson. Mistborn proves they were right.",
         "dewey_normal" : "813",
         "publisher_name" : "Tor Fantasy",
         "edition_info" : "Mass Market Paperback; 2007-07-31",
         "language" : "",
         "lcc_number" : "",
         "publisher_text" : "Tor Fantasy",
         "publisher_id" : "tor_fantasy",
         "title" : "Mistborn",
         "title_latin" : "Mistborn",
         "marc_enc_level" : "~",
         "dewey_decimal" : "813",
         "author_data" : [
            {
               "name" : "Brandon Sanderson",
               "id" : "brandon_sanderson"
            }
         ]
      }
   ],
   "index_searched" : "isbn"
}
</code></pre>

<h2 id="a-very-basic-example-code-in-python">A very basic example code in Python</h2>

<pre><code class="language-python">#!/usr/bin/env python

import urllib2
import json

url = 'http://isbndb.com/api/v2/json/RK8FPFZU/book/0765350386'
obj = urllib2.urlopen(url)
response = json.load(obj)

for book in response['data']:
    print book['title']
    for author in response['data'][0]['author_data']: 
        print author['name']
    print book['physical_description_text']

</code></pre>

<h4 id="output-1">Output</h4>

<pre><code>Mistborn
Brandon Sanderson
672 pages
</code></pre>

<h2 id="getting-data-in-python">Getting Data in Python</h2>
<p>We will use <code>urllib2</code> to open the URL and <code>json</code> to parse the json data the URL provides.</p>

<pre><code class="language-python">#!/usr/bin/env python

import urllib2
import json

# URL Structure for ISBNDB JSON API
# http://isbndb.com/api/v2/json/api_key/book/isbn

# ISBNDB_key = 'RK8FPFZU'
# isbn = '0743277465'

url = 'http://isbndb.com/api/v2/json/RK8FPFZU/book/0743277465'

obj = urllib2.urlopen(url)

response = json.load(obj)

print response
</code></pre>

<h3 id="output-2">Output</h3>

<pre><code class="language-json">{
   "index_searched" : "isbn",
   "data" : [
      {
         "lcc_number" : "GV1439",
         "marc_enc_level" : "7",
         "publisher_text" : "New York : Free Press, 2008.",
         "urls_text" : "",
         "book_id" : "the_art_of_learning_a04",
         "publisher_name" : "Free Press",
         "language" : "eng",
         "title_latin" : "art of learning",
         "awards_text" : "",
         "subject_ids" : [
            "entertainment_puzzles_games_board_games_chess",
            "health_mind_body_self_help_motivational",
            "health_mind_body_personal_health",
            "health_mind_body_psychology_counseling_by_topic_learning",
            "biographies_memoirs_memoirs",
            "waitzkin_josh",
            "chess_players_united_states_biography",
            "tai_chi",
            "learning",
            "meditation"
         ],
         "dewey_normal" : "613.7148",
         "author_data" : [
            {
               "id" : "josh_waitzkin",
               "name" : "Josh Waitzkin"
            }
         ],
         "title_long" : "The art of learning: an inner journey to optimal performance",
         "dewey_decimal" : "613.7/148",
         "summary" : "",
         "isbn10" : "0743277465",
         "isbn13" : "9780743277464",
         "physical_description_text" : "xxi, 265 p. : ill. ; 22 cm.",
         "notes" : "The foundation -- My second art -- Bringing it all together.",
         "edition_info" : "",
         "publisher_id" : "free_press",
         "title" : "The art of learning"
      }
   ]
}
</code></pre>

<h2 id="getting-specific-details">Getting specific details</h2>

<p>printing items from lists (iterating through lists)</p>

<pre><code class="language-python">for book in response['data']:
    print book['title']
    for author in response['data'][0]['author_data']: 
        print author['name']
    print book['physical_description_text']
</code></pre>

<p>Be sure to read <a href="http://stackoverflow.com/questions/10855827/how-to-loop-through-json-in-python">this</a> and <a href="http://stackoverflow.com/questions/14089238/iterating-and-printing-json-objects-in-python">this</a> for iterating over ‘lists in an object’ like we have the ‘author_data’ list in the ‘data’ object.</p>

<p>For the purpose of this article i’m only getting the <strong>title</strong>, <strong>author</strong> and <strong>number of pages</strong>. You can edit the code to output as many details as you want from the data object.</p>

<h2 id="turning-the-whole-thing-into-a-function-search-by-isbn">Turning the whole thing into a function (search by ISBN)</h2>

<pre><code class="language-python">#!/usr/bin/env python

import urllib2
import json

isbndb_key = 'RK8FPFZU'

def isbn_search(query):
    api_key = isbndb_key
    url = 'http://isbndb.com/api/v2/json/' + api_key + '/book/'
    isbn = query
    # isbn = query.replace(' ', '%20') will replace any spaces with %20.
    # not needed in this url design/structure though so commented out
    final_url = url + query

    obj = urllib2.urlopen(final_url)
    response = json.load(obj)

    for book in response['data']:
        print book['title']
        for author in response['data'][0]['author_data']:
            print author['name']
        print book['physical_description_text']

</code></pre>

<h3 id="output-3">Output</h3>
<p>For <code>isbn_search('0765350386')</code></p>

<pre><code>Mistborn
Brandon Sanderson
672 pages
</code></pre>

<p>For <code>isbn_search('0743277465')</code></p>

<pre><code>The art of learning
Josh Waitzkin
xxi, 265 p. : ill. ; 22 cm.
</code></pre>

<p>The pages are actually taken from the <strong>physical_description_text</strong> item, so it is okay for it to sometimes show other physical attributes in addition to the pages. If this bothers you, use the Open Library API that gives out <strong>number_of_pages</strong> insated of physical_description_text. The code is just an example.</p>

<h2 id="turning-the-whole-thing-into-a-function-search-by-name">Turning the whole thing into a function (search by Name)</h2>

<pre><code class="language-python">import urllib2
import json

ISBNDB_key = 'RK8FPFZU'

def name_search(query):
    api_key = ISBNDB_key
    url = 'http://isbndb.com/api/v2/json/' + api_key + '/book/'
    name = query.replace(' ', '_') #replace any spaces with _
    final_url = url + name
    obj = urllib2.urlopen(final_url)
    response = json.load(obj)

    for book in response['data']:
        print book['title']
        for author in response['data'][0]['author_data']:
            print author['name']
        print book['physical_description_text']

</code></pre>

<h3 id="output-4">Output</h3>

<p>For <code>name_search('mistborn')</code></p>

<pre><code>Mistborn
Brandon Sanderson
672 pages
</code></pre>

<p>For <code>name_search('the girl who kicked the hornets nest')</code></p>

<pre><code>The Girl Who Kicked the Hornets' Nest
Stieg Larsson
576 pages
</code></pre>


  </div>

</article>

      </div>
    </div>
    <footer class="Site-footer">

  <div class="wrapper">


    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li><h2 class="footer-heading">TLDR Dev Notes</h2></li>
          <li><a href="mailto:hello@aamnah.com">hello@aamnah.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/Aamnah"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">Aamnah</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/AamnahAkram"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">AamnahAkram</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Please note that this site and the posts on it are, and will always be, a work in progress. If i waited for perfection, i’d never get anything done.
</p>
      </div>
    </div>

  </div>
  <script src="/prism/prism.js"></script>
</footer>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51214502-1', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>
